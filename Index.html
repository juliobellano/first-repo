<!DOCTYPE html>
<html>
<head>
    <title>Stock Portfolio Tracker</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <script>
            async function searchStocks(query) {
        const response = await fetch(`search_stock.php?query=${query}`); // Modified URL
        const data = await response.json();
        const dropdown = document.getElementById("stockDropdown");
        dropdown.innerHTML = "";
        data.bestMatches.forEach(stock => {
            const option = document.createElement("option");
            option.value = stock["1. symbol"];
            option.textContent = `${stock["1. symbol"]} - ${stock["2. name"]}`;
            dropdown.appendChild(option);
        });
    }

function updateDropdown() {
    const query = document.getElementById("stockSearch").value;
    if (query.length > 2) {
        searchStocks(query);
    }
}
    </script>
</head>
<body>
    <div class="container">
        <h1>Stock Portfolio Tracker</h1>
        <form action="add_stock.php" method="post">
            <label for="stockSearch">Search for a stock:</label>
            <input type="text" id="stockSearch" name="stockSearch" onkeyup="updateDropdown()">
            <label for="stockDropdown">Select stock:</label>
            <select id="stockDropdown" name="stockSymbol">
            </select>
            <input type="submit" value="Add to Portfolio">
        </form>

        <button type="button" onclick="showPortfolio()">Show Portfolio</button>

        <h2>Portfolio</h2>
        <table id="portfolioTable">
            <tr><th>Symbol</th><th>Name</th></tr>
        </table>
    </div>
</body>
</html>
